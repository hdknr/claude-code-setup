# 実行モードと権限管理

## 実行モードとは

Claude Code には、作業を進めるときの**権限レベル**を決める「実行モード」があります。どのくらい自動で作業を進めてよいかを制御する仕組みです。

たとえるなら、アシスタントへの信頼度に応じた指示の出し方です:

- 「毎回確認してね」→ **通常モード**
- 「ファイル操作は自分でやっていいよ」→ **オートアクセプトモード**
- 「まず計画を見せてね」→ **プランモード**

## 3 つの実行モード

### 通常モード（デフォルト）

Claude Code を普通に起動したときのモードです。ファイルの編集やコマンドの実行のたびに、許可を求めてきます。

```
Claude wants to run: git status
Allow? (y/n)
```

**こんな人におすすめ:**

- Claude Code を使い始めたばかりの方
- 何が行われるか一つ一つ確認したい方
- 大切なファイルを扱うとき

!!! tip "初心者の方はこのモードから始めましょう"
    毎回確認が入るので手間はかかりますが、予期しない操作を防げる最も安全なモードです。

### オートアクセプトモード

ファイルの読み書きなどの操作を自動的に許可するモードです。いちいち確認されないので、作業がスムーズに進みます。

起動時にオプションを付けるか、会話中に `Shift+Tab` キーで切り替えられます。

```bash
# 起動時に指定する場合
claude --allowedTools "Edit,Write,Read"
```

**こんな人におすすめ:**

- Claude Code の動作に慣れてきた方
- 定型的な作業を効率よく進めたい方

!!! warning "注意"
    確認なしに操作が実行されるため、`CLAUDE.md` で安全ルールを設定してから使うことをおすすめします。[CLAUDE.md の使い方](claude-md.md) を参照してください。

### プランモード

Claude Code にいきなり作業させるのではなく、**まず計画を立てさせて確認してから実行する**モードです。

会話中に `Shift+Tab` キーを何度か押すと切り替えられます。

```
[Plan Mode] まず計画を作成します。実行はしません。

1. report.md を読み取り
2. データを集計
3. グラフを作成
4. レポートを更新

この計画で進めてよいですか?
```

**こんな人におすすめ:**

- 大きな作業を始める前に全体像を確認したい方
- 複数ファイルにまたがる変更を行うとき
- 「何をするか」を先に知りたい方

!!! info "プランモードは「見積もり」のようなもの"
    リフォーム業者にいきなり工事を始めてもらうのではなく、まず見積書と工事計画を出してもらう — プランモードはそれと同じ考え方です。

## モードの切り替え方

### 起動時の指定

```bash
# 通常モード（デフォルト）
claude

# ワンショット（一度だけ実行、対話なし）
claude -p "ファイル一覧を表示して"
```

### 会話中の切り替え

会話中は `Shift+Tab` キーを押すことで、モードを切り替えられます。

```
Shift+Tab で切り替え:
  通常モード → オートアクセプトモード → プランモード → 通常モード ...
```

## どのモードを使えばいい?

| 状況 | おすすめモード |
|------|---------------|
| Claude Code を使い始めたばかり | **通常モード** |
| 大切なファイルを扱う作業 | **通常モード** または **プランモード** |
| 定型的な文書作成 | **オートアクセプトモード** |
| 複数ファイルの大きな変更 | **プランモード** → 確認後に実行 |
| ちょっとした確認や質問 | **通常モード** |

!!! tip "迷ったら通常モードで"
    どのモードを使うか迷ったら、通常モードのままで大丈夫です。慣れてきたら、作業に応じてモードを使い分けてみてください。
