# CLAUDE.md の使い方

## CLAUDE.md とは

`CLAUDE.md` は、Claude Code に対する**常駐の指示書**です。Claude Code を起動すると、このファイルの内容が自動的に読み込まれ、毎回の会話で指示として適用されます。

たとえるなら、新しく来たアシスタントに「うちではこういうルールで仕事をしてね」と渡すマニュアルのようなものです。

### なぜ必要なの?

Claude Code はとても賢く便利ですが、指示がなければ**独自の判断**で作業を進めることがあります。

- 大切なファイルを確認なしに上書きしてしまう
- よくわからないコマンドをいきなり実行する
- 不要なパッケージを勝手にインストールする

`CLAUDE.md` で事前にルールを伝えておくことで、こうしたトラブルを防げます。

## CLAUDE.md の種類と配置場所

`CLAUDE.md` は配置する場所によって効果の範囲が変わります。

| 種類 | 配置場所 | 効果の範囲 |
|------|----------|-----------|
| **プロジェクト用** | プロジェクトフォルダの直下（`~/Projects/my-workspace/CLAUDE.md`） | そのプロジェクトでのみ有効 |
| **グローバル用** | `~/.claude/CLAUDE.md` | すべてのプロジェクトで共通して有効 |

!!! tip "まずはプロジェクト用から始めましょう"
    初めての方はプロジェクトフォルダに `CLAUDE.md` を作成するだけで十分です。慣れてきたら、どのプロジェクトでも共通のルールをグローバル用に書くと便利です。

## 初心者におすすめの安全ルール

Claude Code を安心して使うために、以下のルールを `CLAUDE.md` に書いておくことをおすすめします。

### 基本テンプレート

```markdown
# ワークスペースのルール

## 基本ルール
- 日本語で応答してください
- 技術的なコマンドを実行する前に、何をするか平易な日本語で説明してください
- 判断に迷ったら、勝手に進めずに確認してください

## ファイル操作の保護
- 既存ファイルを上書きする前に、必ず確認してください
- 重要なファイルを変更する場合は、バックアップを作成してください

## 削除コマンドの制限
- rm、del、rmdir 等の削除コマンドは原則として実行しないでください
- rm -rf（強制削除）は絶対に実行しないでください

## パッケージのインストール
- npm、pip、brew 等のインストールコマンドは、事前に何をインストールするか説明し、承認を得てから実行してください
```

### 各ルールの解説

#### ファイル操作の保護

```markdown
## ファイル操作の保護
- 既存ファイルを上書きする前に、必ず確認してください
- 重要なファイルを変更する場合は、バックアップを作成してください
```

Claude Code はファイルの作成や編集が得意ですが、確認なしに既存ファイルを書き換えてしまうことがあります。このルールを書いておくと、上書き前に「このファイルを変更してよいですか?」と確認してくれるようになります。

#### 削除コマンドの制限

```markdown
## 削除コマンドの制限
- rm、del、rmdir 等の削除コマンドは原則として実行しないでください
- rm -rf（強制削除）は絶対に実行しないでください
```

`rm -rf` は、指定したフォルダとその中身をすべて削除する強力なコマンドです。間違った場所で実行すると、大切なファイルが取り返しのつかない状態になります。初心者の方は、削除コマンドを禁止しておくのが安全です。

#### パッケージのインストール制限

```markdown
## パッケージのインストール
- npm、pip、brew 等のインストールコマンドは、事前に何をインストールするか説明し、承認を得てから実行してください
```

パッケージとは、ソフトウェアの追加機能のようなものです。Claude Code が作業の過程で「これが必要です」とパッケージをインストールすることがありますが、中には不要なものや、パソコンの環境に影響を与えるものもあります。事前に説明を求めることで、不要なインストールを防げます。

#### 技術的なコマンドの説明

```markdown
## 基本ルール
- 技術的なコマンドを実行する前に、何をするか平易な日本語で説明してください
```

Claude Code が実行するコマンドは、慣れていないと何をしているのかわかりません。このルールを書いておくと、「今からこのコマンドを実行します。これは〇〇するためのコマンドです」と説明してくれるようになります。

## CLAUDE.md の作り方

### 方法 1: Claude Code に作ってもらう

一番簡単な方法です。Claude Code を起動して、以下のように指示してください:

```
CLAUDE.md ファイルを作成してください。
内容は以下のルールを含めてください:
- 日本語で応答する
- ファイル上書き前に確認する
- 削除コマンドは実行しない
- パッケージインストール前に説明する
- コマンド実行前に平易な日本語で説明する
```

### 方法 2: テンプレートをコピーする

上の「基本テンプレート」をそのままコピーして、プロジェクトフォルダに `CLAUDE.md` というファイル名で保存してください。

## 慣れてきたらカスタマイズしよう

`CLAUDE.md` は自由に書き換えられます。使っていくうちに「こういうルールも欲しいな」と思ったら、どんどん追記してください。

### カスタマイズの例

**プロジェクトの説明を追加する:**

```markdown
## このプロジェクトについて
このリポジトリは個人の家計簿管理ツールです。
Excel ファイルから月次レポートを生成します。
```

**よく使うファイルの場所を教える:**

```markdown
## ファイル構成
- `data/` - 元データ（Excel ファイル）
- `reports/` - 生成されたレポート
- `templates/` - レポートのテンプレート
```

**作業スタイルの指定:**

```markdown
## 作業スタイル
- 一度に大きな変更をせず、小さなステップで進めてください
- 各ステップの結果を確認してから次に進んでください
```

!!! info "CLAUDE.md は何度でも更新できます"
    最初は最低限のルールから始めて、使いながら育てていくのがおすすめです。「こうしてほしいな」と思ったことは、その場で CLAUDE.md に追記してもらいましょう。

    ```
    CLAUDE.md に「ファイル名は日本語を使わないでください」というルールを追加してください
    ```
